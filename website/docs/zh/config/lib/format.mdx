# lib.format

- **类型：** `'esm' | 'cjs' | 'umd' | 'mf'`
- **默认值：** `undefined`
- **必填：** 是

指定生成的 JavaScript 产物的输出格式。

更多详情请参阅 [输出格式](/guide/basic/output-format) 和 [模块联邦](/guide/advanced/module-federation)。

::: note
`umd` 格式仅在 [bundle](/config/lib/bundle) 设置为 `true` 时有效。
:::

## 模块定义系统

在不同的产物格式下，Rslib 默认使用的模块定义系统如下：

- `esm`：[modern-module](https://rspack.dev/zh/config/output#type-modern-module)
- `cjs`：[commonjs-static](https://rspack.dev/zh/config/output#type-commonjs-static)
- `umd`：[umd](https://rspack.dev/zh/config/output#type-umd)

如果你想要使用其他的模块定义系统，可以配置 [tools.rspack.output.library.type](https://rspack.dev/zh/config/output#outputlibrarytype) 选项。以下是一个示例，将 `cjs` 产物的模块定义系统设置为 `commonjs`：

```ts title="rslib.config.ts"
export default {
  lib: [
    {
      format: 'cjs',
      tools: {
        rspack: {
          output: {
            library: {
              type: 'commonjs',
            },
          },
        },
      },
    },
  ],
};
```
